<div class="change-detection-log" appChangeDetectionLogger component="user-list-item"></div>
<div class="user-wrapper" (click)="toggle()">
    <div class="user-data text-secondary">
        <img class="user-data-image" [src]="user.image">
        <span class="text ellipsis user-data-item">{{ user.firstName }}</span>
        <span class="text ellipsis user-data-item">{{ user.lastName }}</span>
        <span class="text ellipsis user-data-item">{{ user.lastUpdated }}</span>
    </div>
    <div class="user-actions">
        <span class="text text-primary" (click)="refresh($event)">Refresh</span>
        <span class="text text-primary" (click)="delete($event)">Delete</span>
    </div>
</div>
<div *ngIf="toggled">
    <div class="tabs">
        <span class="tab text" [class.active]="tab === 'details'" (click)="switchTab('details')">Details</span>
        <span class="tab text" [class.active]="tab === 'todos'" (click)="switchTab('todos')">Todos</span>
        <span class="tab text" [class.active]="tab === 'posts'" (click)="switchTab('posts')">Posts</span>
    </div>
    <div>
        <app-user-details *ngIf="tab === 'details'" [user]="user"></app-user-details>
        <app-post-list *ngIf="tab === 'posts'" [userId]="user.id" [posts]="posts$ | async"></app-post-list>
        <app-todo-list *ngIf="tab === 'todos'" [userId]="user.id" [todos]="todos$ | async"></app-todo-list>
    </div>
</div>
